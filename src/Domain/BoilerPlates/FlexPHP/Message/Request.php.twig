<?php declare(strict_types=1);

namespace Domain\{{ entity }}\Request;

use FlexPHP\Messages\RequestInterface;

final class {{ action }}{{ entity }}Request implements RequestInterface
{
{% if action|lower in ['read', 'delete'] %}
    public ${{ pkName }};

    public function __construct({{ pkTypeHint }} ${{ pkName }})
    {
        $this->{{ pkName }} = ${{ pkName }};
    }
{% elseif action|lower in ['login'] %}
    public ${{ login }};

    public function __construct(string ${{ login }})
    {
        $this->{{ login }} = ${{ login }};
    }
{% else %}
{% for id, property in properties %}
{% if (action|lower in ['update'] and property.isPk) or (not property.isAi and not property.isBlame) %}
    public ${{ id }};
{% endif %}
{% endfor %}
{% if properties %}

{% endif %}
{% if action|lower in ['update'] %}
    public function __construct({{ pkTypeHint }} ${{ pkName }}, array $data)
{% else %}
    public function __construct(array $data)
{% endif %}
    {
{% for id, property in properties %}
{% if action|lower in ['update'] and property.isPk %}
        $this->{{ id }} = ${{ pkName }};
{% elseif not (action|lower in ['create'] and property.isAi) and not property.isBlame %}
        $this->{{ id }} = $data['{{ id }}'] ?? null;
{% endif %}
{% endfor %}
    }
{% endif %}
}
