<?php declare(strict_types=1);

namespace Domain\{{ entity }};

{% for request in requests %}
use Domain\{{ entity }}\Request\{{ request }}{{ entity }}Request;
{% endfor %}
use FlexPHP\Repositories\Repository;

final class {{ entity }}Repository extends Repository
{
{% for action in actions %}
{% if action in ['index'] %}
    public function findBy(IndexPostRequest $request): array
    {
        return $this->getGateway()->find((array)$request, [], 10);
    }
{% elseif action in ['create'] %}
    public function add(Create{{ entity }}Request $request): void
    {
        ${{ item }} = (new {{ entity }}Factory())->make($request);

        $this->getGateway()->save(${{ item }});
    }
{% elseif action in ['read'] %}
    public function getById(Read{{ entity }}Request $request): array
    {
        ${{ item }} = (new {{ entity }}Factory())->make($request);

        return $this->getGateway()->get(${{ item }});
    }
{% elseif action in ['update'] %}
    public function shift(Update{{ entity }}Request $request): void
    {
        ${{ item }} = (new {{ entity }}Factory())->make($request);

        $this->getGateway()->merge(${{ item }});
    }
{% elseif action in ['delete'] %}
    public function pop(Delete{{ entity }}Request $request): void
    {
        ${{ item }} = (new {{ entity }}Factory())->make($request);

        $this->getGateway()->drop(${{ item }});
    }
{% endif %}
{% if not loop.last %}

{% endif %}
{% endfor %}
}
